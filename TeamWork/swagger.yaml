swagger: '2.0'
info:
  version: 0.0.1
  title: '大学生兼职测试api'
  description: '本api只用来给app进行测试用'
host: 'localhost:3000'
basePath: '/'
consumes:
- "application/x-www-form-urlencoded"
produces:
- 'application/json'
paths:
  /auth:
    post:
      description: |
        登陆，返回用户基本信息和验证TOKEN
      parameters:
        - name: email
          in: formData
          description: 用户邮箱
          required: true
          type: string
        - name: password
          in: formData
          description: 密码
          required: true
          type: string
          format: password
      responses:
        '200':
          description: 登陆成功
          schema:
            $ref: '#/definitions/User'
        default:
          description: 登陆失败
          schema:
            $ref: "#/definitions/ErrorModel"
  /user:
    get:
      description: 得到某个用户的信息(如果需要登陆的话要参数要带上authtoken)
      parameters:
      - name: id
        in: query
        description: 用户的id
        required: true
        type: integer
        format: int64
      responses:
        '200':
          description: 找到用户
          schema:
            $ref: '#/definitions/UserDetail'
        default:
          description: unexpected error
          schema:
            $ref: "#/definitions/ErrorModel"
  /resume:
    get:
      description: 得到某份简历
      parameters:
      - name: id
        in: query
        description: 简历id
        required: false
        type: integer
        format: int64
      - name: user_id
        in: query
        description: 用户id
        required: yes
        type: integer
        format: int64
      responses:
        '200':
          description: 简历详情
          schema:
            type: array
            items: 
              $ref: '#/definitions/Resume'
        default:
          description: unexpected error
          schema:
            $ref: "#/definitions/ErrorModel"
    delete:
      description: 删除简历
      parameters:
      - name: id
        in: query
        description: 简历id
        required: true
        type: integer
        format: int64
      - name: auth
        in: query
        description: 登陆获得的auth token
        required: true
        type: string
      responses:
        '200':
          description: deleted
        default:
          description: unexpected error
          schema:
            $ref: "#/definitions/ErrorModel"
    post:
      description: 添加简历
      comsumes:
      - "application/x-www-form-urlencoded"
      - "multipart/form-data"
      parameters:
      - name: user_id
        in: body
        description: 用户的id
        required: true
      - name: name
        in: body
        description: 简历里的姓名
        required: false
      - name: school
        in: body
        description: 学校
        required: false
      - name: introduction
        in: body
        description: 简介
        required: false  
      - name: photo
        in: body
        description: 简历的照片文件
        required: false
      - name: auth
        in: query
        description: 登陆获得的auth token
        required: true
        type: string
      responses:
        '201':
          description: 简历详情
          schema:
            $ref: '#/definitions/Resume'
        default:
          description: unexpected error
          schema:
            $ref: "#/definitions/ErrorModel"
  /job:
    get:
      description: 查找岗位
      parameters:
      - name: id
        in: query
        description: 岗位id
        required: false
        type: integer
        format: int64
      - name: q
        in: query
        description: 关键字
        required: false
        type: string
      - name: offset
        in: query
        description: 查找结果的偏移量（用来分页）
        required: false
        type: integer
        format: int32
      - name: max_result
        in: query
        description: 最多返回的结果
        required: false
        type: integer
        format: int32
      responses:
        '200':
          description: 返回搜索的所有岗位(如果确定了id,则无视其他参数)
          schema:
            type: array
            items:
              $ref: '#/definitions/Job'
        default:
          description: unexpected error
          schema:
            $ref: "#/definitions/ErrorModel"
  /company:
    get:
      description: 公司信息
      parameters:
      - name: id
        in: query
        description: 岗位id
        required: false
        type: integer
        format: int64
      - name: q
        in: query
        description: 关键字
        required: false
        type: string
      - name: offset
        in: query
        description: 查找结果的偏移量（用来分页）
        required: false
        type: integer
        format: int32
      - name: max_result
        in: query
        description: 最多返回的结果
        required: false
        type: integer
        format: int32
      responses:
        '200':
          description: 返回搜索的所有公司信息(如果确定了id,则无视其他参数)
          schema:
            type: array
            items:
              $ref: '#/definitions/Company'
        default:
          description: unexpected error
          schema:
            $ref: "#/definitions/ErrorModel"
    
definitions:
  User:
    type: 'object'
    required:
    - email
    - id
    - auth
    properties:
      id:
        type: 'integer'
        format: 'int64'
      email:
        type: 'string'
      nickname:
        type: 'string'
      avatar:
        type: 'string'
      auth:
        type: 'string'
  UserDetail:
    type: object
    required:
    - id
    properties:
      id:
        type: integer
        format: int64
      email:
        type: string
      nickname:
        type: string
      avatar:
        type: string
      sign:
        type: string
      birthday:
        type: string
        format: date
      location:
        type: string
      sex: 
        type: integer
        format: int32
      contact: 
        type: string
  Resume:
    type: object
    required:
    - id
    - user_id
    properties:
      id:
        type: integer
        format: int64
      user_id:
        type: integer
        format: int64
      name:
        type: string
      photo:
        type: string
      school:
        type: string
      introduction:
        type: string
  NewResume:
    type: object
    required:
    - user_id
    - name
    properties:
      user_id:
        type: integer
        format: int64
      name:
        type: string
      photo:
        type: string
      school:
        type: string
      introduction:
        type: string
  Job:
    type: object
    required:
    - id
    - name
    properties:
      id:
        type: integer
        format: int64
      name:
        type: string
      salary:
        type: string
      description:
        type: string
      company_id:
        type: integer
        format: int64
      company_name:
        type: string
      create_time:
        type: string
        format: date
  Company:
    type: object
    required:
    - id
    - name
    properties:
      id:
        type: integer
        format: int64
      name: 
        type: string
      url: 
        type: string
      address: 
        type: string
      logo:
        type: string
      description:
        type: string
      leader:
        type: string
  ErrorModel:
    type: "object"
    required:
    - "code"
    - "message"
    properties:
      code:
        type: "integer"
        format: "int32"
      message:
        type: "string"
      